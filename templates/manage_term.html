{% extends "base.html" %}
{% block content %}

<div class="container">
    <div class="row">
        <div class="col s5">
            <div class="card">
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4">
                        {{ term.term_name }}
                        <i class="material-icons right">more_vert</i></span>
                    <span><a class="btn-floating waves-effect waves-light red"><i
                                class="material-icons">add</i></a></span>

                    <p>{{ term.type_name }}</p>
                    <p>{{ term._id }}</p>
                    {% if term.alt_terms|length > 0 %}
                    {% for alt_term in term.alt_terms %}
                    <span><a href="#">{{ alt_term }}</a></span>
                    {% endfor %}
                    {% endif %}
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">{{ term.term_name }}<i
                            class="material-icons right">close</i></span>
                    {% for incorrect_term in term.incorrect_terms %}
                    <span>
                        {% if loop.first %}
                        <strong>not</strong>
                        {% endif %}<a href="#">{{ incorrect_term }}</a></span>
                    {% if not loop.last %}
                    <span> or </span>
                    {% endif %}
                    {% endfor %}
                </div>
                <div>
                    <div>
                        {% for term_comment in term_comments %}
                        <div class="container comment-width">
                            <div class="card">
                                <p class="show-comments">{{ term_comment.timestamp }}</p>
                                <p class="show-comments">User {{ term_comment.commenter }} said:</p>
                                <strong>
                                    <p class="show-comments">{{ term_comment.comment }}</p>
                                </strong>
                                {% if user == "admin" %}
                                <a class="delete-btn" href="{{ url_for('delete_comment', comment_id=term_comment._id, term_id=term._id)}}">delete comment</a>
                                {% elif user == "notadmin" %}
                                    {% if already_flagged %}
                                    <p>Sorry you have already flagged this comment</p>
                                    {% else %}
                                    <a class="flag-btn" href="{{ url_for('flag_comment', comment_id=term_comment._id, term_id=term._id, username=username)}}">flag comment</a>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}

                    </div>
                    <p class="comment-username">Comment as {{ user }}</p>
                    <form method="POST" action="{{ url_for('add_comment', term_id=term._id) }}">
                        <textarea name="comment" id="comment" cols="30" rows="10" type="text"></textarea>
                        <button type="submit">Add comment</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}