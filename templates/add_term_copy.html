
<body>
    <!-- Desktop navigation -->
    <nav id="nav-closed" class="z-depth-0 gradient white-text">
        <div class="nav-wrapper">
            <div class="logo-alert">
                <a href="{{ url_for('dashboard', user=session['user']) }}"
                    class="brand-logo logo white-text">myHouse</a>
                <a id="alert" class="alert" href="#!" onclick="alert()" value="You have {{ g.notifications }}
                notification{% if g.notifications > 1 %}s{% endif %}">!</a>
                <span class="alert">&nbsp;</span>
            </div>
                    <a href="#" data-target="sidenav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                    <ul class="right hide-on-med-and-down">
                        <li><a class="" href="{{ url_for('add_term') }}">Add terms</a></li>
                        <li><a class="" href="{{ url_for('manage_users') }}">Manage users</a></li>
                        <li><a class="" href="{{ url_for('add_term') }}">Make a suggestion</a></li>

                        <li><a class="modal-trigger" href="javascript:void(0)" data-target="logout-modal">Log out</a></li>
   
                        <li><a class="" href="{{ url_for('profile', user=session['user']) }}">Profile</a></li>

                    </ul>
                    <ul class="right hide-on-med-and-down">
                        <li><a class="white-text" href="{{ url_for('register') }}">Register</a></li>
                        <li><a class="white-text" href="{{ url_for('login') }}">Log in</a></li>
                    </ul>
                
                <!-- Mobile/tablet navigation -->
                <ul class="sidenav" id="sidenav-mobile">
                    <li><a class="sidenav-item" href="{{ url_for('add_term') }}">Add terms</a><a class="material-icons"
                            href="{{ url_for('add_term') }}">keyboard_arrow_right</a></li>
                    <li><a class="sidenav-item" href="{{ url_for('manage_users') }}">Manage users</a><a class="material-icons"
                            href="{{ url_for('manage_users') }}">keyboard_arrow_right</a></li>
                    <li><a class="sidenav-item" href="{{ url_for('add_term') }}">Make a suggestion</a><a class="material-icons"
                            href="{{ url_for('add_term') }}">keyboard_arrow_right</a></li>

                    <li><a class="sidenav-item" href="{{ url_for('profile', user=session['user']) }}">Profile</a><a
                            class="material-icons"
                            href="{{ url_for('profile', user=session['user']) }}">keyboard_arrow_right</a></li>
                    <li><a class="modal-trigger sidenav-item" href="javascript:void(0)" data-target="logout-modal">Log out</a><a
                            class="material-icons" href="javascript:void(0)">keyboard_arrow_right</a></li>
                    <!-- Pinned terms -->
                    <div class="sidenav-card card z-depth-1">
                        <div class="sidenav-card-title card-title card-header gradient white-text">Your pinned terms</div>
                        <div class="sidenav-card-surround card-surround card-content">

                                <div class="sidenav-pin pin chip">
                                    <a class="link"
                                        href="{{ url_for('go_to_term', term_id=pinned_term._id) }}">{{ pinned_term.term_name }}</a>
                                    <a href="{{ url_for('remove_pin', pinned_term=pinned_term._id) }}"><i
                                            class="close material-icons">close</i></a>
                                </div>

                            <div class="col">
                                <p class="no-pins">Pin your most searched-for terms here!</p>
                            </div>
             
                        </div>
                    </div>
                    <!-- Admin updates -->
                        <div class="sidenav-card card z-depth-1">
                            <div class="sidenav-card-title card-title card-header gradient white-text">
                                Recent Updates</div>
                            <div class="card-content card-surround">
                                <p class="minor-text">New registrations</p>
                                    <div class="mt0 mb0 row">
                                        <div class="col s12">
                                            <p class="updates valign-wrapper">
                                                <span>{{ new_reg.username|capitalize() }}:</span>
                                                <a href="{{ url_for('manage_user_sidenav', each_user_id=new_reg._id) }}"
                                                    class="icon-button btn-small z-depth-0" type="submit"><i
                                                        class="small material-icons center-align">keyboard_arrow_up</i></a>
                                            </p>
                                        </div>
                                    </div>
 
                                <p class="no-updates valign-wrapper updates">No new registrations</p>
                                <hr>
                                <p class="minor-text">Flagged comments</p>
                                    <div class="mt0 mb0 row">
                                        <div class="col s12">
                                            <p class="updates valign-wrapper">
                                                <span class="truncate">{{ manage_flagged_comments(flagged) }}:
                                                    "{{ flagged.comment }}"</span> <a class="btn-small icon-button z-depth-0"
                                                    href="{{ url_for('delete_flag', comment_id=flagged._id) }}"><i
                                                        class="keyboard material-icons">close</i></a>
                                            </p>
                                        </div>
                                    </div>
                                <p class="no-updates">No new flagged comments</p>
                                <hr>
                                <p class="minor-text">Suggested terms</p>
                                    <p class="updates valign-wrapper">"{{ suggestion.term_name }}"
          
                                        <a class="btn-small icon-button z-depth-0"
                                            href="{{ url_for('manage_term', term_id=suggestion._id) }}"><i
                                                class="small material-icons">keyboard_arrow_right</i></a>
                                    </p>
     
                                <p class="no-updates">No new term suggestions</p>

                            </div>
                        </div>

                        <div class="sidenav-card card z-depth-1">
                            <div class="sidenav-card-title gradient white-text card-header card-title">Recent Updates</div>
                            <div class="card-surround card-content">
                                <div class="mt0 mb0 row">
                                    <div class="col s12">
                                        <p class="updates valign-wrapper"><strong>{{ update.term_name }} </strong>
                                            <a class="btn-small icon-button z-depth-0"
                                                href="{{ url_for('view_term', term_id=update._id) }}"><i
                                                    class="small material-icons">keyboard_arrow_right</i></a>
                                        </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                       <div class="sidenav-card card z-depth-1">
                            <div class="sidenav-card-title gradient white-text card-header card-title">Recent Comments</div>
                            <div class="card-surround card-content">

                                    <div class="row mb0 mt0">
                                        <div class="col s12">
                                            <p class="updates valign-wrapper"><strong
                                                    class="truncate">{{ term_comment(comment)[0] }}</strong>
                                                <span class="truncate">{{ comment.comment }}"</span>
                                                <a class="btn-small icon-button z-depth-0"
                                                    href="{{ url_for('view_term', term_id=term_comment(comment)[1]) }}"><i
                                                        class="small material-icons">keyboard_arrow_right</i></a>
                                            </p>
                                        </div>
                                    </div>
                           </div>
                        </div>
 
                </ul>
        </div>
        </nav>
        <div class="sidenav-close sidenav-wrap">
            <div id="change-pword" class="row">
                <div class="col s12 m8 l8 offset-m2 offset-l2">
                    <div class="card z-depth-1 mb0 show-on-medium-and-down">
                        <div class="card-content card-surround gradient-light">
                            <p>Looks like you're new here, please</p>
                            <p><a class="btn-small z-depth-0 search-mng-btn"
                                    href="{{ url_for('profile', user=user) }}">change your
                                    password.</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Title (desktop), flash messages (desktop) and search bar -->
            <div id="subheader" class="row valign-wrapper">
                <p id="awaiting-approval">Account awaiting admin approval</p>
                <div id="flash-h3-con" class="hide-on-med-and-down show-on-large">
                    <span class="page-title">{{- this_h3 -}}</span>
          
                        <span class="count-notifications">
                            <span id="message" value="{{ message }}"></span>
                        </span>
                   
                </div>
                <form id="search-bar" method="POST" action="{{ url_for('search_terms') }}">
                    <div class="search-row">
                        <div id="search-input" class="input-field right-align">
                            <input class="search-input-box" type="text" name="query" id="query" minlength="2" required>
                            <label id="search-label" for="query">Search terms</label>
                        </div>
                        <div class="letters-container">
                            <div class="hidden letters left-align hide-on-small-only" id="letters">
                                <div class="letter-chip"><a
                                        href="{{ url_for('get_category', category=category) }}">{{ category }}</a>
                                </div>
                            </div>
                        </div>
                        <div class="search-buttons search">
                            <button type="submit" class="icon-button btn-small z-depth-0 material-icons"
                                id="search-btn-mobile">
                                search
                            </button>
                            <a href="javascript:void(0)" class="btn-small z-depth-0 search-mng-btn"
                                id="browse-toggle">A-Z</a>
                        </div>
                    </div>
                    <div class="letters row hide-on-large-only" id="letters-mobile">
                        <div class="col s12">
                            <div class="letter-chip"><a
                                    href="{{ url_for('get_category', category=category) }}">{{ category }}</a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <main id="main-content" class="sidenav-close">
                <div id="notifications-desktop" class="row">
                    <div id="notifications" class="col l4 hide-on-med-and-down">
                        <!-- PINNED TERMS card -->
                        <div class="card z-depth-1">
                            <div class="card-title card-header gradient white-text">Your pinned terms</div>
                            <div class="card-surround card-content">
                                <div class="row">
                           
                                        <div class="col mt0">
                                            <div class="pin chip">
                                                <a class="link"
                                                    href="{{ url_for('go_to_term', term_id=pinned_term._id) }}">{{ pinned_term.term_name }}</a><a
                                                    href="{{ url_for('remove_pin', pinned_term=pinned_term._id) }}"><i
                                                        class="close material-icons">close</i></a>
                                            </div>
                                        </div>
                                    
                                    <div class="col">
                                        <p>Pin your most searched-for terms here!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ADMIN ALL UPDATES (not comments) card -->
                        <div class="card z-depth-1">
                            <div class="card-title card-header gradient white-text">
                                Recent Updates</div>
                            <!-- New registrations -->
                            <div class="card-content card-surround">
                                <p class="minor-text">New registrations</p>
                                    <form class="" method="POST"
                                        action="{{ url_for('update_user', each_user_id=new_reg._id, origin='dash') }}">
                                        <div class="valign-wrapper button-flex-wrap">
                                            <p>{{ new_reg.username|capitalize() }}:</p>
                                            <select id="access_level" name="access_level" class="">
                                                <option value="" disabled selected><span id="dd-placeholder">Set access
                                                        level</span>
                                                </option>
                                                <option value="{{ access_level.level_name }}">{{ access_level.level_name }}
                                                </option>
                                            </select>
                                            <button class="icon-button btn-small z-depth-0" type="submit"><i
                                                    class="small material-icons center-align">keyboard_arrow_up</i></button>
                                        </div>
                                    </form>
                         
                                <p>No new registrations</p>
                                <hr>
                                <!-- Flagged comments -->
                                <p class="minor-text">Flagged comments</p>
                                    <div class="mt0 mb0 row">
                                        <div class="col s12">
                                            <p class="updates valign-wrapper">
                                                <span class="truncate">{{ manage_flagged_comments(flagged) }}:
                                                    "{{ flagged.comment }}"</span>
                                                <a class="btn-small icon-button z-depth-0"
                                                    href="{{ url_for('delete_flag', comment_id=flagged._id) }}"><i
                                                        class="keyboard material-icons">close</i></a>
                                            </p>
                                        </div>
                                    </div>
                                
                                <p>No new flagged comments</p>
                                {% endif %}
                                <hr>
                                <!-- Suggested terms -->
                                <p class="minor-text">Suggested terms</p>
                                    <div class="row">
                                        <div class="col s12">
                                            <p class="updates valign-wrapper">"{{ suggestion.term_name }}"
                                               
                                                <a class="btn-small icon-button z-depth-0"
                                                    href="{{ url_for('manage_term', term_id=suggestion._id) }}"><i
                                                        class="small material-icons">keyboard_arrow_right</i></a>
                                            </p>
                                        </div>
                                    </div>
                                  
                                <div class="row">
                                    <div class="col s12">
                                        <p>No new term suggestions</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- NON-ADMIN (read & comment/read-only) TERM UPDATES card -->
                            <div class="card z-depth-1">
                                <div class="gradient white-text card-header card-title">Term Updates</div>
                                <div class="card-surround card-content">
                                 
                                        <div class="mt0 mb0 row">
                                            <div class="col s12">
                                                <p class="updates valign-wrapper"><strong>{{ update.term_name }} </strong>was
                                                    recently
                                                    updated
                                                    <a class="btn-small icon-button z-depth-0"
                                                        href="{{ url_for('view_term', term_id=update._id) }}"><i
                                                            class="small material-icons">keyboard_arrow_right</i></a>
                                                </p>
                                            </div>
                                        </div>
                                  
                                    <div class="row">
                                        <div class="col s12">
                                            <p>No new term updates</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- RECENT COMMENTS (not read-only) card -->
                            <div class="card z-depth-1">
                                <div class="gradient white-text card-header card-title">Recent Comments</div>
                                <div class="card-surround card-content">
                           
                                            <div class="row mb0 mt0">
                                                <div class="col s12">
                                                    <p class="updates valign-wrapper"><strong>{{ term_comment(comment)[0] }}</strong>
                                                        <span class="truncate">{{ comment.comment }}"</span>
                                                        <a class="btn-small icon-button z-depth-0"
                                                            href="{{ url_for('view_term', term_id=term_comment(comment)[1]) }}"><i
                                                                class="small material-icons">keyboard_arrow_right</i></a>
                                                    </p>
                                                </div>
                                            </div>
                                       
                                    <div class="row">
                                        <div class="col s12">
                                            <p>No new comments</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                   
                </div>
                </main>
                <!-- Modal Structure -->
                <div id="logout-modal" class="modal">
                    <div class="modal-content">
                        <h4>Log out</h4>
                        <p>Do you really want to log out?</p>
                    </div>
                    <div class="modal-footer">
                        <a href="{{ url_for('logout') }}" class="search-mng-btn btn-small z-depth-0">
                            Yes, log me out<i class="fas fa-plus-square right"></i>
                        </a>
                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
                    </div>
                </div>
            
        
        <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
            integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>


